define(["util","eventemitter","app-plug-in/TodoList/view/build/template","app-plug-in/TodoList/model/model","app-plug-in/TodoList/controller/todos","app-plug-in/TodoList/controller/input_contro","app-plug-in/TodoList/controller/list_contro"],function(t,i,o,n,s,e,l){function d(t){this.el=t,this.model=new n,this.todos=new s(this.model)}var h=t;return d.prototype={constructor:d,elements:{$close:".close",$todolist:"todolist"},init:function(){var t=this._initTodoList();this._initInput(t),this._initList(t),this.el.appendChild(t),this._initDom(),this._initEvent()},_initTodoList:function(){var t=o("todolist_view",{}),i=h.template(t,"todolist");return i},_initInput:function(t){var i=h.$("#todoapp-header",t),o=new e(this.todos,this.model,i);o.init()},_initList:function(t){var i=h.$("#todo-list",t),o=new l(this.todos,this.model,i);o.init()},_initDom:function(){for(var t in this.elements)this[t]=h.$(this.elements[t],this.el)},_initEvent:function(){h.on(this.$close,"click",this.close.bind(this))},close:function(){this.$todolist.classList.add("close"),this.$todolist.parentNode.removeChild(this.$todolist),this.emit("close")}},d=h.eventify(d,i)});