define(["util"],function(t){function n(t,n,i){this.lists=t||{},this.totalCount=i||n||0,this.onlineCount=n||0}return n.prototype={initMember:function(){},getMember:function(){var t=this._getList(),n=this._getTotalCount(),i=this._getOnlineCount();return{lists:t,totalCount:n,onlineCount:i}},hasMember:function(){return 0!==this.totalCount},updateMember:function(t){this.lists=t,this.totalCount=Object.keys(t).length},addMember:function(t){this._addList(t),this._addTotalCount()},descMember:function(t){this._descList(t),this._descTotalCount()},addOnlineCount:function(){this.onlineCount++},descOnlineCount:function(){this.onlineCount--},changeState:function(t){var n=this._findList(t);this.lists[n].state="online"===this.lists[n].state?"offline":"online"},_getList:function(){return this.lists},_getTotalCount:function(){return this.totalCount},_getOnlineCount:function(){return this.onlineCount},_addList:function(t){for(var n in t)this.lists[n]||(this.lists[n]=t[n])},_addTotalCount:function(){this.totalCount++},_descList:function(t){var n=this._findList(t);delete this.lists[n]},_findList:function(t){var n;for(var i in this.lists)if(this.lists.hasOwnProperty(i)&&this.lists[i].id===t.id){n=i;break}return n},_descTotalCount:function(){this.totalCount--}},n});