define(["util","eventemitter","app-chat/view/build/template"],function(t,i,n){function e(t,i){this.el=t,this.login=i}var o=t;return e.prototype={data:null,loginStatus:"",elements:{".login-btn":"$login",".regist-btn":"$regist","input[type=text]":"$account","input[placeholder=sign]":"$sign","input[type=checkbox]":"$checkbox"}},e=o.eventify(e,i),o.include(e,{getEl:function(){return this.el},init:function(){this._render(),this._initDom(),this._initEvent()},_render:function(){var t=this._template();this.el.innerHTML=t},_template:function(){return n("chat-login",{})},_initDom:function(){for(var t in this.elements)this[this.elements[t]]=o.$(t,this.el)},_initEvent:function(){o.on(this.$login,"click",this.log.bind(this))},log:function(t){t.preventDefault();var i=this._getLoginData();return i.account?(this.$account.classList.remove("wrong"),void this.emit("log",i)):void this.$account.classList.add("wrong")},_getLoginData:function(){for(var t,i=this.$account.value,n=this.$sign.value,e=o.$All("input[type=radio]"),s=0,c=e.length;c>s;s++)e[s].checked&&(t=e[s].value);return""===i?!1:{account:i,sign:n,sex:t}},_checkAccount:function(t){var i=this._loginSuccess.bind(this),n=this._loginFail.bind(this);o.ajax("POST","http://localhost:3000/login",t,{success:i,fail:n})},_loginSuccess:function(t){this.data=t,this.loginStatus=!0},_loginFail:function(t){this.loginStatus=!1},regist:function(){}}),e});